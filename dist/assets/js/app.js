!function(){"use strict";var __webpack_modules__={"./src/assets/js/app.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _common_ratio_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./common/ratio.js */ "./src/assets/js/common/ratio.js");\n/* harmony import */ var _game_gameManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game/gameManager.js */ "./src/assets/js/game/gameManager.js");\n\n\n\ndocument.addEventListener(\'DOMContentLoaded\',()=>{\n    new _game_gameManager_js__WEBPACK_IMPORTED_MODULE_1__["default"](); \n})\n\n\n/**\n * ratio\n */\nwindow.addEventListener(\'load\', _common_ratio_js__WEBPACK_IMPORTED_MODULE_0__["default"]);\nwindow.addEventListener(\'resize\', _common_ratio_js__WEBPACK_IMPORTED_MODULE_0__["default"]);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/app.js?')},"./src/assets/js/auth/adminAuth.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\nclass AdminAuth {\n    constructor() {\n        this.apiUrl = 'https://gameserver2.kemo.ru/api/admin/login-token';\n        this.tokenKey = 'admin_token';\n        this.expireKey = 'admin_token_expires';\n        this.form = document.getElementById('auth_form');\n        this.loginInput = document.getElementById('auth_login');\n        this.passInput = document.getElementById('auth_pass');\n\n        if (!this.form) {\n            console.info('[AUTH] –ù–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –§–æ—Ä–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.');\n            return; // –ø—Ä–µ—Ä—ã–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é\n        }\n\n        this.init();\n    }\n\n    init() {\n        this.form.addEventListener('submit', (e) => {\n            // console.log(this.form);\n            e.preventDefault();\n            this.login();\n        });\n    }\n\n    async login() {\n        const password = this.passInput.value.trim();\n\n        if (!password) {\n            alert('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');\n            return;\n        }\n\n        try {\n            const response = await fetch(this.apiUrl, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ password })\n            });\n\n            const result = await response.json();\n\n            if (result.data?.success) {\n                const token = result.data.token;\n                const expires = Date.now() + result.data.expires_in * 1000;\n\n                localStorage.setItem(this.tokenKey, token);\n                localStorage.setItem(this.expireKey, expires);\n\n                console.log('[AUTH] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω');\n                window.location.href = '/admin.html'; // –∏–ª–∏ –Ω—É–∂–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞\n            } else {\n                alert(result.data.message || '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');\n            }\n\n        } catch (error) {\n            console.error('[AUTH] –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);\n            alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');\n        }\n    }\n\n    static logout() {\n        localStorage.removeItem('admin_token');\n        localStorage.removeItem('admin_token_expires');\n        window.location.href = '/auth.html';\n    }\n\n    static isAuthenticated() {\n        const token = localStorage.getItem('admin_token');\n        const expires = localStorage.getItem('admin_token_expires');\n        return token && expires && Date.now() < Number(expires);\n    }\n\n    static getToken() {\n        return localStorage.getItem('admin_token');\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AdminAuth);\n\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/auth/adminAuth.js?")},"./src/assets/js/common/ratio.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/**\n * ratio\n */\nfunction checkRatio() {\n    const ratio = window.innerHeight / window.innerWidth;\n    if (ratio > 1.6) {\n      document.body.classList.add('vertical');\n      document.body.classList.remove('horizontal');\n    } else {\n      document.body.classList.add('horizontal');\n      document.body.classList.remove('vertical');\n    }\n  }\n\n  /* harmony default export */ __webpack_exports__[\"default\"] = (checkRatio);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/common/ratio.js?")},"./src/assets/js/game/UIController.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\nclass UIController {\n\n    constructor() {\n        this.roundEl = document.querySelector('#rounds');\n        this.roundStatus = this.roundEl.querySelector('.round_status span');\n        this.roundTarget = this.roundEl.querySelector('.round_target');\n        this.counterContainer = this.roundEl.querySelector('.round_container');\n        this.roundInfo = this.roundEl.querySelector('.round_info');\n        this.roundCoinInfo = this.roundEl.querySelector('.round_coin_info');\n        this.roundResult = this.roundEl.querySelector('.round_result');\n        this.roundResultTotal = this.roundEl.querySelector('.round_reult_text');\n        this.roundFinish = this.roundEl.querySelector('.round_finish');\n    }\n\n    /**\n     * –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ–∫—Ü–∏–∏ –∫ —Ä–∞–π–Ω–¥—É\n     */\n    prepareSectionForRound() {\n        if (this.roundTarget.classList.contains('winner')) {\n            this.roundTarget.classList.remove('winner');\n        }\n        this.hideElement([this.roundCoinInfo, this.roundResult, this.roundResultTotal, this.roundFinish]);\n        this.showElement([this.roundStatus, this.roundTarget, this.counterContainer, this.roundInfo]);\n    }\n\n    /**\n     * —Å–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã \n     * @param {*} elements - –º–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n     */\n    hideElement(elements) {\n        elements.forEach(el => {\n            el.classList.add('slide-hidden');\n            setTimeout(() => {\n                el.classList.add('none');\n            }, this.animationTime);\n        });\n    }\n\n    /**\n    * –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã \n    * @param {*} elements - –º–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n    */\n    showElement(elements) {\n        elements.forEach(el => {\n            el.classList.remove('none');\n            setTimeout(() => {\n                el.classList.remove('slide-hidden');\n            }, 10);\n        });\n    }\n    /**\n     * –æ–∂–∏–¥–∞–Ω–∏–µ –∫–ª–∏–∫–∞ –ø—Ä–æ–±–µ–ª–∞ –∏–ª–∏ —ç–Ω—Ç–µ—Ä–∞\n     * @returns \n     */\n    waitForKeyPress() {\n        return new Promise(resolve => {\n            function handler(event) {\n                if (event.code === 'Enter' || event.code === 'Space') {\n                    document.removeEventListener('keydown', handler);\n                    resolve();\n                }\n            }\n            document.addEventListener('keydown', handler);\n        });\n    }\n\n    /**\n     * –æ–∂–∏–¥–∞–Ω–∏–µ –∫–ª–∏–∫–∞ –º–≤—à–∫–∏ –∏–ª–∏ –∫–ª–∞–≤–∏—à–∏\n     * @returns \n     */\n    waitForClick() {\n        return new Promise(resolve => {\n            const handler = () => {\n                document.removeEventListener('keydown', handler);\n                document.removeEventListener('mousedown', handler);\n                resolve();\n            };\n\n            document.addEventListener('keydown', handler);\n            document.addEventListener('mousedown', handler);\n        });\n    }\n\n    /**\n     * \n     * @param {*} counterArr \n     */\n    updateCounter(counterArr) {\n        this.counterContainer.innerHTML = counterArr.map((c, i, arr) => `\n            <div class=\"digit-container\">\n                ${c.alfabet[c.current]}\n                <div class=\"shadow ${i === arr.length - 1 ? 'green' : 'grey'}\"></div>\n            </div>\n        `).join('');\n    }\n\n    /**\n     * –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∏ –Ω–µ—É–¥–∞—á–∏ –ø–æ–¥—Ä—è–¥\n     */\n    async showTooManyFails() {\n        this.roundEl.classList.add('default');\n        this.roundTarget.innerHTML = '–ú—ã —Ç–∞–∫ –∏ –∑–Ω–∞–ª–∏, —á—Ç–æ –ë–∞—Ä–æ–º–∏—Ä —Å–ø—Ä–∞–≤–∏—Ç—Å—è –ª—É—á—à–µ —Ç–µ–±—è!';\n        this.roundResultTotal.innerHTML = '<p>–ù–æ –ø—Ä–∏—Ö–æ–¥–∏ –ø–æ–∑–∂–µ –∏ –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!</p>'\n\n        this.hideElement([this.roundStatus.parentElement, this.roundCoinInfo, this.counterContainer, this.roundResult, this.roundInfo]);\n        await this.delay(500);\n        this.showElement([this.roundFinish, this.roundResultTotal]);\n\n        // –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞\n        await this.delay(5000);\n        location.reload();\n    }\n\n\n    /**\n     * –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é\n     * @param {*} id  id —Å—Ç–∞—Ä–æ–π —Å–µ–∫—Ü–∏–∏\n     * @param {*} idNew id –Ω–æ–≤–æ–π —Å–µ–∫—Ü–∏–∏\n     * @param {*}  name –∏–º—è –¥–ª—è –ø–µ—Ä–≤–æ–π —Å–µ–∫—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å \n     */\n    showSection(id, idNew, name = '') {\n\n        if (name !== '') {\n            document.querySelector('[data-name]').textContent = name;\n        }\n\n        const section = document.getElementById(id);\n        section.classList.remove('active');\n        setTimeout(() => section.classList.add('none'), 300);\n\n        const next = document.getElementById(idNew);\n        next.classList.remove('none');\n        setTimeout(() => next.classList.add('active'), 10);\n    }\n\n    /**\n    * —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞\n    */\n    async runBacktimer() {\n        const countEl = document.querySelector('[data-count]');\n        const textEl = document.querySelector('[data-text]');\n\n        for (let i = 3; i > 0; i--) {\n\n            countEl.querySelector(`[data-num=\"${i}\"]`).classList.add('active');\n            await this.delay(1000);\n            countEl.querySelector(`[data-num=\"${i}\"]`).classList.add('slide');\n\n        }\n\n        setTimeout(() => {\n            textEl.classList.add('active');\n        }, 300);\n        await this.delay(1000);\n        textEl.classList.add('scale');\n        setTimeout(() => {\n            textEl.classList.remove('active');\n        }, 300);\n\n\n        //–ø—Ä–æ–¥—É–±–ª–∏—Ä—É–µ–º –≤—Ä–µ–º—è –¥–ª—è –∞–Ω–∏–º–∞–∞—Ü–∏–∏\n        await this.delay(1000)\n    }\n\n    /**\n    * –∑–∞–¥–µ—Ä–∂–∫–∞\n    * @param {*} ms \n    * @returns \n    */\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    /**\n     * –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞—É–Ω–¥\n     * @param {*} roundNumber \n     * @param {*} counterArr \n     * @param {*} fact \n     */\n    showRound(roundNumber, counterArr, fact) {\n        this.roundEl.classList.remove('none');\n\n        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ—É –æ —Ä–∞—É–Ω–¥–µ\n        this.roundStatus.textContent = roundNumber;\n        this.roundStatus.closest('.round_status').style.display = 'block';\n        this.roundTarget.style.display = 'block';\n        this.roundInfo.style.display = 'block';\n\n        // –§–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É —Ü–µ–ª–∏\n        const target = counterArr.map(c => c.alfabet[c.target]).join('');\n        this.roundTarget.innerHTML = `–ü–û–ô–ú–ê–ô ${target}`;\n        this.roundInfo.innerHTML = fact;\n\n        // –û—á–∏—â–∞–µ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—á—ë—Ç—á–∏–∫–∞\n        this.counterContainer.innerHTML = '';\n        this.counterContainer.style.display = 'flex';\n\n        counterArr.forEach((digit, i) => {\n            const digitContainer = document.createElement('div');\n            digitContainer.classList.add('digit-container');\n            const safeIndex = typeof digit.current === 'number' ? digit.current : 0;\n            digitContainer.textContent = digit.alfabet[safeIndex] ?? '?';\n\n            const shadow = document.createElement('div');\n            shadow.classList.add('shadow');\n            shadow.classList.add(i === counterArr.length - 1 ? 'green' : 'grey');\n\n            digitContainer.appendChild(shadow);\n            this.counterContainer.appendChild(digitContainer);\n        });\n    }\n\n    /**\n     * –±–ª–∏–∫ —Ñ–æ–Ω–∞\n     * @param {*} selector \n     */\n    async showblick(selector) {\n        const image = document.querySelector(selector);\n        image.classList.remove('hide');\n        image.classList.add('blick');\n        await this.delay(5000);\n        image.classList.remove('blick');\n        image.classList.add('hide');\n    }\n\n    /**\n     * –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö\n     * @param {*} result —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—ä–µ–∫—Ç \n     */\n    async showSuccess(result) {\n        this.changecolor('green');\n        this.roundEl.classList.add('right');\n        this.roundEl.classList.remove('default');\n\n        setTimeout(() => {\n            this.showSalut();\n        }, 2000);\n        await this.showblick('.victory');\n\n        this.hideElement([this.counterContainer, this.roundInfo]);\n        this.showElement([this.roundCoinInfo, this.roundResult]);\n\n        this.roundTarget.classList.add('winner');\n        this.roundTarget.innerHTML = '–¢–æ—á–Ω–æ, –∫–∞–∫ 2–ì–ò–°!  <br> –ù–∞¬†—Ç–≤–æ—ë–º —Å—á–µ—Ç—É:';\n\n        this.roundCoinInfo.querySelector('span').textContent = result.points;\n\n        for (let i = 3; i > 0; i--) {\n            this.roundResult.querySelector('span').textContent = i;\n            await this.delay(1000);\n        }\n        this.roundEl.classList.add('default');\n        this.roundEl.classList.remove('right');\n    }\n\n    /**\n     * –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–µ—É–¥–∞—á—É\n     * @param {*} result \n     */\n    async showFail(result) {\n        this.changecolor('red');\n        this.roundEl.classList.add('wrong');\n        this.roundEl.classList.remove('default');\n        await this.showblick('.fail');\n\n        this.hideElement([this.counterContainer, this.roundInfo]);\n        this.showElement([this.roundResult]);\n        this.roundTarget.classList.add('winner');\n        if (result.round === 3) {\n            this.roundTarget.innerHTML = '–ú–¥–∞, –ø–ª–æ—Ö–æ. –ü–ª–æ—Ö–æ-–ø–ª–æ—Ö–æ, –Ω–µ–≤–∞–∂–Ω–æ üòê <br> –ï—â—ë –∏ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å';\n            this.roundResult.innerHTML = '–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ <span>3</span>'\n        } else {\n            this.roundTarget.innerHTML = '–ú–¥–∞, –ø–ª–æ—Ö–æ. –ü–ª–æ—Ö–æ-–ø–ª–æ—Ö–æ, –Ω–µ–≤–∞–∂–Ω–æ üòê <br> –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!';\n        }\n        for (let i = 3; i > 0; i--) {\n            this.roundResult.querySelector('span').textContent = i;\n            await this.delay(1000);\n        }\n\n        this.roundEl.classList.add('default');\n        this.roundEl.classList.remove('wrong');\n\n        // result.round == 3 ? this.showEnd(result) : '';\n    }\n\n    /**\n     * –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–∞–ª—é—Ç\n     * @returns \n     */\n    showSalut() {\n        return new Promise((resolve) => {\n            const coinImages = ['Coin.svg', 'Silver.svg', 'Gold.svg'];\n            const count = 100;\n            const container = document.getElementById('coin-fireworks');\n            if (!container) return resolve();\n\n            let done = 0;\n\n            for (let i = 0; i < count; i++) {\n                const img = document.createElement('img');\n                img.src = `./assets/images/salut/${coinImages[Math.floor(Math.random() * coinImages.length)]}`;\n                img.classList.add('coin-piece');\n\n                const startX = Math.random() * window.innerWidth;\n                const delay = Math.random() * 1000; \n\n                img.style.left = `${startX}px`;\n                img.style.top = `-50px`;\n                img.style.animationDelay = `${delay}ms`;\n\n                container.appendChild(img);\n\n                setTimeout(() => {\n                    img.remove();\n                    done++;\n                    if (done === count) resolve();\n                }, 2500 + delay); // –∑–∞–¥–µ—Ä–∂–∫–∞ + –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏\n            }\n        });\n    }\n\n\n\n    /**\n     * —Å–º–µ–Ω–∞ —Ñ–æ–Ω–∞ —Ü–∏—Ñ—Ä\n     * @param {*} color \n     */\n    changecolor(color) {\n        const shadows = this.counterContainer.querySelectorAll('.shadow');\n        shadows.forEach(shadow => {\n            if (shadow.classList.contains('grey') || shadow.classList.contains('green')) {\n                shadow.classList.remove('grey');\n                shadow.classList.remove('green');\n                shadow.classList.add(color);\n            }\n        });\n    }\n\n    /**\n     * –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Ç–æ–≥–∞\n     * @param {*} scope \n     */\n    async showEnd(scope) {\n        this.roundEl.classList.add('default');\n        this.roundTarget.innerHTML = '–ò–≥—Ä–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å, <br> –Ω–∞¬†—Ç–≤–æ—ë–º —Å—á–µ—Ç—É:';\n        this.roundCoinInfo.querySelector('span').textContent = scope;\n\n        this.hideElement([this.roundStatus.parentElement, this.counterContainer, this.roundResult, this.roundInfo]);\n        await this.delay(500);\n        this.showElement([this.roundCoinInfo, this.roundResultTotal, this.roundFinish]);\n\n\n        // –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞\n        await this.delay(5000);\n        // location.reload();\n\n    }\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (UIController);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/game/UIController.js?")},"./src/assets/js/game/calculateCurrent.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/**\n * —Ä–∞—Å—á–µ—Ç current\n * @param {*} target \n * @param {*} alfabet \n * @param {*} totalTime \n * @param {*} interval \n * @returns \n */\n\nfunction calculateCurrent(target, alfabet, totalTime = 10000, interval = 120) {\n    const steps = Math.floor(totalTime / interval);\n    const index = alfabet.indexOf(target);\n    const len = alfabet.length;\n\n    // –¥–≤–∏–≥–∞–µ–º—Å—è –ø–æ –∫—Ä—É–≥—É, —á—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –≤ target —á–µ—Ä–µ–∑ steps —à–∞–≥–æ–≤\n    const start = (index - steps + len) % len;\n\n    return start;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (calculateCurrent);\n\n\n//–≤—Å—Ç–∞–≤–∫–∞ –≤ game manager\n// this.counterValues = question.counter.map(c => {\n        //     const { target, alfabet } = c;\n        \n        //     if (!Array.isArray(alfabet)) {\n        //         console.warn('‚ùó alfabet –Ω–µ –º–∞—Å—Å–∏–≤:', alfabet);\n        //         return c;\n        //     }\n        \n        //     if (typeof target !== 'number') {\n        //         console.warn('‚ùó target –Ω–µ —á–∏—Å–ª–æ:', target);\n        //         return c;\n        //     }\n        \n        //     if (target < 0 || target >= alfabet.length) {\n        //         console.warn('‚ùó target –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:', target, 'alfabet:', alfabet);\n        //         return c;\n        //     }\n        \n        //     const targetChar = alfabet[target];\n        \n        //     if (typeof targetChar === 'undefined') {\n        //         console.warn('‚ùó targetChar undefined. target:', target, 'alfabet:', alfabet);\n        //     } else {\n        //         console.log('‚úÖ targetChar:', targetChar, 'alfabet:', alfabet);\n        //     }\n        \n        //     let calculatedCurrent;\n        //     try {\n        //         calculatedCurrent = calculateCurrent(targetChar, alfabet);\n        //     } catch (e) {\n        //         console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ current:', e);\n        //         calculatedCurrent = c.current ?? 0;\n        //     }\n        \n        //     return {\n        //         ...c,\n        //         current: calculatedCurrent\n        //     };\n        // });\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/game/calculateCurrent.js?")},"./src/assets/js/game/dataManager.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\nclass DataManager {\n    constructor() {\n      this.questions = [];\n      this.usedIndexes = new Set();\n    }\n  \n    /**\n     * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ JSON-—Ñ–∞–π–ª–∞\n     */\n    async loadQuestions() {\n      if (this.questions.length) return; // –£–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã\n  \n      try {\n        const response = await fetch('./assets/js/questions.json');\n        if (!response.ok) {\n          throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ questions.json');\n        }\n  \n        this.questions = await response.json();\n      } catch (err) {\n        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–æ–ø—Ä–æ—Å–æ–≤:', err);\n      }\n    }\n  \n    /**\n     * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –≤–æ–ø—Ä–æ—Å\n     */\n    async getRandomQuestion() {\n      await this.loadQuestions();\n  \n      if (this.usedIndexes.size >= this.questions.length) {\n        console.warn('–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã!');\n        return null; // –ò–ª–∏: this.resetUsedIndexes(); —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ\n      }\n  \n      let index;\n      do {\n        index = Math.floor(Math.random() * this.questions.length);\n      } while (this.usedIndexes.has(index));\n  \n      this.usedIndexes.add(index);\n      return this.questions[index];\n    }\n  \n    /**\n     * –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ)  (–µ—Å–ª–∏ –Ω–µ –±—É–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å)\n     */\n    resetUsedIndexes() {\n      this.usedIndexes.clear();\n    }\n  }\n  \n  \n  /* harmony default export */ __webpack_exports__[\"default\"] = (DataManager);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/game/dataManager.js?")},"./src/assets/js/game/gameManager.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _calculateCurrent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calculateCurrent.js */ \"./src/assets/js/game/calculateCurrent.js\");\n/* harmony import */ var _dataManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dataManager.js */ \"./src/assets/js/game/dataManager.js\");\n/* harmony import */ var _player_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./player.js */ \"./src/assets/js/game/player.js\");\n/* harmony import */ var _UIController_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./UIController.js */ \"./src/assets/js/game/UIController.js\");\n/**\n * –ú–µ–Ω–µ–¥–∂–µ—Ä —É–ø—Ä–∞–≤–ª–µ–∏—è –∏–≥—Ä—ã\n */\n\n\n\n\n\n\nclass GameManager {\n\n    static gameToken = 'gAmEToKeN1';\n    static adminKey = 'Q3z8vKp9N2w5R6s1Xy7L';\n\n    constructor() {\n        this.round = 0;\n        this.maxRounds = 3;\n        this.failedAttempts = 0;\n        this.maxFails = 3;\n\n        this.started = false;\n\n        this.player = new _player_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n        this.ui = new _UIController_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n        this.data = new _dataManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n\n        this.ws = null;\n\n        this.init();\n    }\n\n    async init() {\n        // /–ø–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω\n        await this.connectWebSocket();\n        this.ui.showSection('start', 'hello', this.player.getName());\n\n        //–≤—Ç–æ—Ä–æ–π —ç–∫—Ä–∞–Ω\n        await this.ui.waitForKeyPress();\n        this.ui.showSection('hello', 'backtimer');\n        await this.ui.runBacktimer();\n        this.ui.showSection('backtimer', 'rounds');\n\n        //—Ä–∞—É–Ω–¥\n        this.startGame();\n\n    }\n\n\n    /**\n     * –≤–µ–± —Å–æ–∫–µ—Ç\n     * @returns  \n     */\n    connectWebSocket() {\n        return new Promise((resolve, reject) => {\n            const wsUrl = `wss://gameserver2.kemo.ru/ws?game_token=${GameManager.gameToken}`;\n            this.ws = new WebSocket(wsUrl);\n\n            console.log(wsUrl);\n            const authPayload = {\n                admin_key: GameManager.adminKey\n            };\n\n            this.ws.onopen = () => {\n                if (this.ws.readyState === WebSocket.OPEN) {\n                    this.ws.send(JSON.stringify(authPayload));\n                    console.log('[WS] –ü–æ–¥–∫–ª—é—á–µ–Ω–æ. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º admin_key: ', authPayload);\n                } else {\n                    console.error('[WS] WebSocket –Ω–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ OPEN');\n                }\n            };\n\n            this.ws.onmessage = async (event) => {\n                const data = JSON.parse(event.data);\n\n                switch (data.event) {\n                    case 'auth_ok':\n                        console.log('[WS] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞');\n                        break;\n\n                    case 'auth_failed':\n                        console.error('[WS] –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', data.message);\n                        this.ws.close();\n                        reject(data.message);\n                        break;\n\n                    case 'game_started':\n                        console.log('[WS] –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ game_started', data.payload);\n                        this.player.initializePlayer(data.payload);\n                        resolve();\n                        break;\n\n                    default:\n                        console.warn('[WS] –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ:', data);\n                        break;\n                }\n            };\n\n            this.ws.onerror = (error) => {\n                console.error('[WS] –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:', error);\n                reject(error);\n            };\n\n            this.ws.onclose = (event) => {\n                console.warn(`[WS] –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ. –ö–æ–¥: ${event.code}, –ø—Ä–∏—á–∏–Ω–∞: ${event.reason}`);\n                if (event.code === 1008) { // 1008 –æ–±—ã—á–Ω–æ –¥–ª—è –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏\n                    console.error('[WS] –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ admin_key');\n                }\n            };\n        });\n    }\n\n    /**\n     * —Å—Ç–∞—Ä—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–∑—ã –∏–≥—Ä—ã\n     */\n    async startGame() {\n        await this.data.loadQuestions();\n        this.startNextRound();\n    }\n\n\n    /**\n     * —Å—Ç–∞—Ä—Ç —Ä–∞—É–Ω–¥–∞\n     * @returns \n     */\n    async startNextRound() {\n        await this.ui.prepareSectionForRound();\n        const question = await this.data.getRandomQuestion();\n        if (!question) {\n            alert('–≤–æ–ø—Ä–æ—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç');\n            return;\n        }\n\n        this.currentQuestion = structuredClone(question);\n        this.round++;\n\n        this.ui.showRound(this.round, question.counter, question.fact);\n        this.counterValues = question.counter;\n\n        this.startCounter();\n\n        // –û–∂–∏–¥–∞–µ–º –∫–ª–∏–∫, —Å —Ç–∞–π–º–∞—É—Ç–æ–º\n        const timeout = 30000; \n        const clickPromise = this.ui.waitForClick();\n        const timeoutPromise = new Promise(resolve => setTimeout(() => resolve('timeout'), timeout));\n\n        const result = await Promise.race([clickPromise, timeoutPromise]);\n\n        this.stopCounter();\n\n        if (result === 'timeout') {\n            console.warn('–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∏—Å—Ç–µ–∫–ª–æ');\n            this.handleFail(true); // true ‚Äî  —Ç–∞–π–º–∞—É—Ç\n        } else {\n            const isCorrect = this.checkText();\n            isCorrect ? this.handleSuccess() : this.handleFail(false);\n        }\n    }\n\n    /**\n     * —Å—Ç–∞—Ä—Ç —Å—á–µ—Ç—á–∏–∫–∞\n     */\n    startCounter() {\n        this.started = true;\n        this.doCycle();\n    }\n\n    /**\n   * —Å—Ç–æ–ø —Å—á–µ—Ç—á–∏–∫–∞\n   */\n    async stopCounter() {\n        this.started = false;\n\n        const isCorrect = this.checkText();\n\n        const result = {\n            points: isCorrect ? 300 : 0,\n            success: isCorrect,\n            round: this.round\n        };\n\n        this.player.saveResult(result);\n        this.player.sendResultToServer?.(isCorrect, result.round); \n\n        if (isCorrect) {\n            this.failedAttempts = 0;\n            await this.ui.showSuccess(result);\n        } else {\n            this.failedAttempts++;\n            await this.ui.showFail(result);\n        }\n\n        if (this.failedAttempts >= this.maxFails) {\n            this.ui.showTooManyFails();\n            return;\n        }\n\n    }\n\n    /**\n   * —É—Å–ø–µ—Ö\n   */\n    async handleSuccess() {\n        const result = {\n            points: 300,\n            success: true,\n            round: this.round\n        };\n\n        this.failedAttempts = 0;\n        await this.ui.showSuccess(result);\n\n\n        if (this.round >= this.maxRounds) {\n            this.ui.showEnd(this.player.getScore());\n        } else {\n            this.startNextRound();\n        }\n    }\n\n    /**\n   * –Ω–µ—É–¥–∞—á–∞ + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É\n   */\n    async handleFail(isTimeout = false) {\n        const result = {\n            points: 0,\n            success: false,\n            round: this.round,\n            timeout: isTimeout\n        };\n\n        await this.ui.showFail(result);\n\n        this.ui.prepareSectionForRound();\n        if (this.failedAttempts >= this.maxFails) {\n            this.ui.showTooManyFails();\n            return;\n        }\n        if (this.round >= this.maxRounds) {\n            this.ui.showEnd(this.player.getScore());\n        } else {\n            this.startNextRound();\n        }\n    }\n\n\n    doCycle() {\n        if (!this.started) return;\n\n        this.textNext();\n\n        this.ui.updateCounter(this.counterValues);\n        setTimeout(() => this.doCycle(), 120);\n    }\n\n    textNext() {\n        for (let i = this.counterValues.length - 1; i >= 0; i--) {\n            let el = this.counterValues[i];\n            el.current++;\n            if (el.current < el.alfabet.length) break;\n            else el.current = 0;\n        }\n    }\n\n    checkText() {\n        return this.counterValues.every((c, i) => c.current === c.target);\n    }\n\n}\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GameManager);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/game/gameManager.js?")},"./src/assets/js/game/player.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../auth/adminAuth.js */ \"./src/assets/js/auth/adminAuth.js\");\n\n\nclass Player {\n    static gameToken = 'gAmEToKeN1';\n    static adminKey = 'Q3z8vKp9N2w5R6s1Xy7L';\n\n    constructor() {\n        this.token = null;\n        this.name = null;\n        this.badge = null;\n        this.sessionToken = null;\n        this.answers = [];\n        this.scope = 0;\n    }\n\n    /**\n     * –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã\n     */\n    initializePlayer(data) {\n        this.token = data.player.player_token;\n        this.name = data.player.name;\n        this.badge = data.player.badge_id;\n        this.sessionToken = data.session_token;\n\n        console.log('[Player] –î–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:', {\n            token: this.token,\n            name: this.name,\n            badge: this.badge,\n            sessionToken: this.sessionToken\n        });\n    }\n\n    /**\n     * —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞\n     * @param {*} result \n     */\n    saveResult(result) {\n        this.scope += result.points;\n        this.answers.push(result.points);\n        console.log('–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã' + this.scope)\n    }\n\n    /**\n     * –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –±–∞–ª–ª–∞—Ö\n     * @returns \n     */\n    getScore() {\n        return this.scope;\n    }\n\n    /**\n     * –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏\n     * @returns \n     */\n    getName() {\n        const arr = this.name.split(\" \")\n        return arr[0];\n    }\n\n    /**\n     * –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä\n     * @param {*} result \n     */\n    // async sendResultToServer(success, roundNumber, session_token, player_token) {\n    //     console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä', result);\n\n    //     // –ó–¥–µ—Å—å –±—É–¥–µ—Ç `fetch('/api/result', { method: 'POST', body: JSON.stringify(result) })`\n    //     const url = `https://gameserver2.kemo.ru/api//games/${Player.gameToken}/session/${sessionToken}/submit`;\n\n    //     try {\n    //         const response = await fetch(url, {\n    //             method: 'POST',\n    //             headers: {\n    //                 'Content-Type': 'application/json',\n    //                 'X-Player-Token': playerToken\n    //             },\n    //             body: JSON.stringify({\n    //                 round_number: roundNumber,\n    //                 payload: {\n    //                     success: success\n    //                 }\n    //             })\n    //         });\n\n    //         const result = await response.json();\n    //         console.log('[API] –û—Ç–≤–µ—Ç –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:', result);\n\n    //         if (!result.data.success) {\n    //             console.warn('[API] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:', result.data.message);\n    //             return null;\n    //         }\n\n    //         const { score_change, session_score, outcome, session_status, result_data } = result.data;\n\n    //         // –û–±–Ω–æ–≤–∏–º –∏–≥—Ä–æ–∫–∞\n    //         this.player.saveResult({ points: score_change });\n\n    //         // –í–µ—Ä–Ω–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–∞–ª—å—à–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å\n    //         return {\n    //             outcome,\n    //             sessionStatus: session_status,\n    //             scoreChange: score_change,\n    //             sessionScore: session_score,\n    //             resultData: result_data\n    //         };\n\n    //     } catch (error) {\n    //         console.error('[API] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞—É–Ω–¥–∞:', error);\n    //         return null;\n    //     }\n    // }\n    /**\n    * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—É–Ω–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä\n    * @param {boolean} success - –£—Å–ø–µ—à–Ω–æ –ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ\n    * @param {number} roundNumber - –ù–æ–º–µ—Ä —Ä–∞—É–Ω–¥–∞\n    * @returns {Promise<{\n    *   outcome: string,\n    *   sessionStatus: string,\n    *   scoreChange: number,\n    *   sessionScore: number,\n    *   previousBestScore?: number,\n    *   updatedBestScore?: number,\n    *   scoreDifference?: number,\n    *   resultData: {\n    *     correct: boolean,\n    *     is_first_success: boolean,\n    *     target_time_ms: number,\n    *     actual_time_ms: number|null\n    *   }\n    * }|null>}\n    */\n    async sendResultToServer(success, roundNumber) {\n        const token = new _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n\n        if (!token) {\n            console.error('[AUTH] –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');\n            window.location.href = '/auth.html';\n            return;\n        }\n\n        const url = `https://gameserver2.kemo.ru/api/games/${Player.gameToken}/session/${this.sessionToken}/submit`;\n\n        console.log(`[API] –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞—É–Ω–¥–∞ ${roundNumber}:`, {\n            success,\n            'Authorization': `Bearer ${token}`,\n            // gameToken: Player.gameToken,\n            sessionToken: this.sessionToken\n        });\n\n        try {\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-Player-Token': this.token\n                },\n                body: JSON.stringify({\n                    round_number: roundNumber,\n                    payload: { success }\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n\n            const result = await response.json();\n            console.log('[API] –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', result);\n\n            if (!result.data.success) {\n                console.warn('[API] –û—à–∏–±–∫–∞ –≤ –æ—Ç–≤–µ—Ç–µ:', result.data.message, 'Code:', result.data.code);\n                return null;\n            }\n\n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç\n            this.saveResult({ points: result.data.score_change });\n\n            // –§–æ—Ä–º–∏—Ä—É–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç\n            return {\n                outcome: result.data.outcome,\n                sessionStatus: result.data.session_status,\n                scoreChange: result.data.score_change,\n                sessionScore: result.data.session_score,\n                ...(result.data.previous_best_score !== undefined && {\n                    previousBestScore: result.data.previous_best_score,\n                    updatedBestScore: result.data.updated_best_score,\n                    scoreDifference: result.data.score_difference\n                }),\n                resultData: result.data.result_data\n            };\n\n        } catch (error) {\n            console.error('[API] –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:', error);\n            return null;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Player);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/game/player.js?")}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];return void 0!==e||(e=__webpack_module_cache__[n]={exports:{}},__webpack_modules__[n](e,e.exports,__webpack_require__)),e.exports}__webpack_require__.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/assets/js/app.js")}();