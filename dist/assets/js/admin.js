!function(){"use strict";var __webpack_modules__={"./src/assets/js/admin.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _admin_formHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./admin/formHandler.js */ \"./src/assets/js/admin/formHandler.js\");\n/* harmony import */ var _admin_searchHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./admin/searchHandler.js */ \"./src/assets/js/admin/searchHandler.js\");\n/* harmony import */ var _admin_sessionPool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./admin/sessionPool.js */ \"./src/assets/js/admin/sessionPool.js\");\n\n\n\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new _admin_formHandler_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('.admin_form_add');\n  new _admin_searchHandler_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('.admin_form_search');\n  const playerPoll = new _admin_sessionPool_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n\n  //–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–ª–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞\n\n  document.getElementById('admin_container').addEventListener('click', async (event) => {\n    const target = event.target;\n\n    if (!target.closest('#admin_container')) {\n      return;\n    }\n\n    //—Å—Ç–∞—Ä—Ç\n    else if (target.classList.contains('start')) {\n      const player_token = target.closest('li').dataset.token;\n      const session_token = target.closest('.control')?.dataset?.session;\n      await playerPoll.startSession(session_token);\n\n    //—Å—Ç–æ–ø\n    } else if (target.classList.contains('stop')) {\n      await playerPoll.stopActiveSession();\n    \n      //—Å–±—Ä–æ—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤\n    }else if (target.classList.contains('reset')){\n      playerPoll.loadPool();\n    }\n\n\n    // else if (target.closest('li')) {\n    //   const token = target.closest('li').dataset.token;\n    //   playerPoll.addToPool(token);\n    // }\n\n  });\n\n});\n\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/admin.js?")},"./src/assets/js/admin/formHandler.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _player_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./player.js */ \"./src/assets/js/admin/player.js\");\n\n/**\n * –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞\n */\nclass PlayerFormHandler {\n    constructor(formSelector) {\n        this.form = document.querySelector(formSelector);\n        if (!this.form) throw new Error(`–§–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: ${formSelector}`);\n        this.form.addEventListener('submit', this.handleSubmit.bind(this));\n    }\n\n    async handleSubmit(event) {\n        event.preventDefault();\n        const badgeId = this.form.querySelector('#player_id')?.value.trim();\n        const name = this.form.querySelector('#player_name')?.value.trim();\n        const telegram = this.form.querySelector('#player_telegram')?.value.trim();\n\n        if (!badgeId || !name) {\n            alert('ID –Ω–∞ –±–µ–π–¥–∂–µ –∏ –∏–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.');\n            return;\n        }\n\n        const submitButton = this.form.querySelector('button[type=\"submit\"]');\n        submitButton.disabled = true;\n        submitButton.textContent = '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ...';\n\n        try {\n            const player = await _player_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].register(badgeId, name, telegram || null);\n            console.log(player?.token);\n    \n            if (player && player.name) {\n                alert(`–ò–≥—Ä–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ${player.name}`);\n            } else {\n                alert('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞.');\n            }\n        } catch (error) {\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞:', error);\n            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');\n        } finally {\n            this.form.reset();\n            submitButton.disabled = false;\n            submitButton.textContent = '–î–æ–±–∞–≤–∏—Ç—å';\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PlayerFormHandler);\n\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/admin/formHandler.js?")},"./src/assets/js/admin/player.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sessionPool_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sessionPool.js */ \"./src/assets/js/admin/sessionPool.js\");\n\n\n/**\n * –∫–ª–∞—Å—Å –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞\n */\nclass Player {\n    static BASE_URL = 'https://gameserver2.kemo.ru/api';\n\n    constructor(playerToken = null) {\n        this.playerToken = playerToken;\n    }\n\n    /**\n     * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞\n     * @param {*} badgeId \n     * @param {*} name \n     * @param {*} telegramNick \n     * @returns \n     */\n\n    static async register(badgeId, name, telegramNick = null) {\n        const payload = {\n            badge_id: String(badgeId),\n            name: name\n        };\n\n        if (telegramNick) {\n            payload.telegram_nick = telegramNick;\n        }\n\n        const response = await fetch(`${Player.BASE_URL}/players`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(payload)\n        });\n\n        const result = await response.json();\n\n        if (result.data.success) {\n            const player = new Player(result.data.player_token);\n            player.badgeId = result.data.badge_id;\n            player.name = result.data.name;\n            player.telegramNick = result.data.telegram_nick;\n            player.token = result.data.player_token;\n            console.log('–ò–≥—Ä–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', player);\n\n            //—Å—Ç–∞–≤–∏–º –≤ –æ—á–µ—Ä–µ–¥—å\n            const pool = await _sessionPool_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addToPool(result.data.player_token);\n\n            if (pool && pool.success) {\n                const poolInstance = new _sessionPool_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](); // –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–π –∑–∞—Ä–∞–Ω–µ–µ, –µ—Å–ª–∏ —É–∂–µ —Å–æ–∑–¥–∞–Ω\n                await poolInstance.loadPool();\n            }\n            return player;\n       \n        } else if (result.data.success == false && result.data.code == 'DUPLICATE_BADGE_ID') {\n            console.warn(result.data.message);\n            console.log(result);\n            alert('–û—à–∏–±–∫–∞: ' + result.data.message);\n\n            //—Å—Ç–∞–≤–∏–º –≤ –æ—á–µ—Ä–µ–¥—å\n            // const pool = await PlayerPool.addToPool(playerToken);\n\n            // if (pool && pool.success) {\n                // const poolInstance = new PlayerPool(); // –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–π –∑–∞—Ä–∞–Ω–µ–µ, –µ—Å–ª–∏ —É–∂–µ —Å–æ–∑–¥–∞–Ω\n                // await poolInstance.loadPool();\n            // }\n\n            return null;\n            \n        } else if(result.data.code === 'VALIDATION_ERROR'){\n            alert('–ù–µ–ø—Ä–æ–π–¥–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è' + result.data.details)\n            console.warn('üîç –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', result.data.details);\n            return null;\n            \n        } else {\n            alert(\"–û—à–∏–±–∫–∞: \" + result.data.message);\n            console.warn('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', result.data.message)\n            return null;\n        }\n    }\n\n    /**\n     * –ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞\n     * @param {*} badgeId \n     */\n    static async search(badgeId) {\n\n        const response = await fetch(`${Player.BASE_URL}/players/badge/${badgeId}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n        })\n        const result = await response.json();\n        return result;\n    }\n\n    //  –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ\n    async fetchProfile() {\n        if (!this.playerToken) {\n            throw new Error('üîí –¢–æ–∫–µ–Ω –∏–≥—Ä–æ–∫–∞ –Ω–µ –∑–∞–¥–∞–Ω.');\n        }\n\n        const response = await fetch(`${Player.BASE_URL}/players/me`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-Player-Token': this.playerToken,\n                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å X-Game-Token, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è\n            }\n        });\n\n        const result = await response.json();\n\n        if (result.data?.success) {\n            console.log('üìÑ –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞:', result.data);\n            return result.data;\n        } else {\n            console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:', result.data?.message);\n            return null;\n        }\n    }\n}\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Player);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/admin/player.js?")},"./src/assets/js/admin/searchHandler.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _player_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./player.js */ \"./src/assets/js/admin/player.js\");\n\n\n/**\n * –ø–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞\n */\nclass PlayerSearchHandler {\n    constructor(formSelector) {\n        this.form = document.querySelector(formSelector);\n        if (!this.form) throw new Error(`–§–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: ${formSelector}`);\n        this.form.addEventListener('submit', this.searchSubmit.bind(this));\n    }\n\n    async searchSubmit(event) {\n        event.preventDefault();\n        const badgeId = this.form.querySelector('#search_player_id')?.value.trim();\n\n        if (!badgeId) {\n            alert('ID –Ω–∞ –±–µ–π–¥–∂–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.');\n            return;\n        }\n\n        const submitButton = this.form.querySelector('button[type=\"submit\"]');\n        submitButton.disabled = true;\n        submitButton.textContent = '–ü–æ–∏—Å–∫...';\n\n        const player = await _player_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].search(badgeId);\n        console.log(player);\n\n        if (player.data.success === true && player.data.exists === true) {\n            const token = player.data.player.player_token;\n            const container = document.getElementById('admin_container');\n            const allItems = container.querySelectorAll('li');\n\n            let found = false;\n            allItems.forEach(li => {\n                if (li.dataset.token === token) {\n                    li.style.display = 'grid'; // –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–π\n                    found = true;\n                } else if (!li.classList.contains('reset')) {\n                    li.style.display = 'none'; // —Å–∫—Ä—ã—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ (–Ω–µ —Å–±—Ä–æ—Å)\n                }\n            });\n\n            if (!found) {\n                alert('–ò–≥—Ä–æ–∫ –Ω–∞–π–¥–µ–Ω, –Ω–æ —ç–ª–µ–º–µ–Ω—Ç –≤ —Å–ø–∏—Å–∫–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂—ë–Ω.');\n                submitButton.disabled = false;\n                submitButton.textContent = '–ù–∞–π—Ç–∏';\n                return;\n            }\n\n            // –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–±—Ä–æ—Å–∞, –µ—Å–ª–∏ –µ—ë –µ—â—ë –Ω–µ—Ç\n            if (!container.querySelector('li.reset')) {\n                const resetBtn = `\n                    <li class=\"reset\" style=\"cursor:pointer;\">\n                        <span style=\"pointer-events:none;\">–°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</span>\n                    </li>`;\n                container.insertAdjacentHTML('beforeend', resetBtn);\n            }\n\n        } else if (player.data.success === true && player.data.exists === false) {\n            alert('–ò–≥—Ä–æ–∫ —Å —Ç–∞–∫–∏–º badge_id –Ω–µ –Ω–∞–π–¥–µ–Ω.');\n        } else {\n            alert(\"–û—à–∏–±–∫–∞: \" + player.data.message);\n            console.warn(player);\n        }\n\n        this.form.reset();\n        submitButton.disabled = false;\n        submitButton.textContent = '–ù–∞–π—Ç–∏';\n    }\n\n\n    createResetButton(container) {\n        if (!container.querySelector('.reset')) {\n            const resetBtn = document.createElement('li');\n            resetBtn.className = 'reset';\n            resetBtn.style.cursor = 'pointer';\n            resetBtn.innerHTML = `<span style=\"pointer-events:none;\">–°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</span>`;\n            container.appendChild(resetBtn);\n        }\n    }\n\n    // async searchSubmit(event) {\n    //     event.preventDefault();\n    //     const badgeId = this.form.querySelector('#search_player_id')?.value.trim();\n\n    //     if (!badgeId) {\n    //         alert('ID –Ω–∞ –±–µ–π–¥–∂–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.');\n    //         return;\n    //     }\n\n    //     const submitButton = this.form.querySelector('button[type=\"submit\"]');\n    //     submitButton.disabled = true;\n    //     submitButton.textContent = '–ü–æ–∏—Å–∫...';\n\n    //     const player = await Player.search(badgeId);\n    //     console.log(player);\n\n    //     if (player.data.success == true && player.data.exists == true) {\n    //         const container = document.getElementById('admin_container');\n    //         const list = `\n    //             <li>\n    //                 <span></span>\n    //                 <span>${player.data.player.badge_id}</span>\n    //                 <span>${player.data.player.name}</span>\n    //                 <div class=\"control\">\n    //                     <span></span>\n    //                     <span></span>\n    //                 </div>\n    //             </li>  \n    //             <li class=\"reset\" style=\"cursor:pointer;\">\n    //                 <span style=\"pointer-events:none;\">–°–±—Ä–æ—Å–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</span>\n    //             </li>`;\n    //         container.innerHTML = '';\n    //         container.insertAdjacentHTML('beforeend', list);\n    //     } else if (player.data.success == true && player.data.exists == false) {\n    //         alert('–ò–≥—Ä–æ–∫ —Å —Ç–∞–∫–∏–º badge_id –Ω–µ –Ω–∞–π–¥–µ–Ω')\n    //     } else {\n    //         alert(\"–û—à–∏–±–∫–∞: \" + player.data.message);\n    //         console.warn(player)\n    //     }\n\n    //     this.form.reset();\n    //     submitButton.disabled = false;\n    //     submitButton.textContent = '–ù–∞–π—Ç–∏';\n    // }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PlayerSearchHandler);\n\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/admin/searchHandler.js?")},"./src/assets/js/admin/sessionPool.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../auth/adminAuth.js */ \"./src/assets/js/auth/adminAuth.js\");\n\n\nclass PlayerPool {\n    static BASE_URL = 'https://gameserver2.kemo.ru/api';\n    static gameToken = 'gAmEToKeN1';\n    static adminKey = 'Q3z8vKp9N2w5R6s1Xy7L';\n    static containerSelector = 'admin_container';\n\n\n    constructor() {\n        this.container = document.getElementById(PlayerPool.containerSelector);\n        this.loadPool();\n    }\n\n    /**\n     * –∑–∞–≥—Ä—É–∑–∫–∞ –ø—É–ª–∞\n     * @returns \n     */\n    async loadPool() {\n        const token = _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getToken();\n\n        if (!token) {\n            console.error('[AUTH] –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');\n            window.location.href = '/auth.html';\n            return;\n        }\n        const response = await fetch(`${PlayerPool.BASE_URL}/admin/games/${PlayerPool.gameToken}/pool?status=started,pending,completed, stopped_by_admin, abandoned`, {\n            method: 'GET',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                // 'X-Admin-API-Key': PlayerPool.adminKey,\n                'Content-Type': 'application/json'\n            }\n        });\n        if (!response.ok) {\n            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—É–ª–∞');\n            return;\n        }\n        console.log(response)\n        const pool = await response.json();\n        this.render(pool);\n    }\n\n    /**\n     * —Ä–µ–Ω–¥–µ—Ä –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤, (–ø–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ –∞–ø–¥–µ–π—Ç)\n     * @param {*} pool \n     */\n    render(pool) {\n        this.container.innerHTML = '';\n        let pendingsCount = 0;\n        console.log(pool.data.sessions)\n        pool.data.sessions.forEach((session, index) => {\n\n            //–ø–∞—Ä—Å–∏–º –≤—Ä–µ–º—è\n            const date = new Date(session.started_at);\n            const hours = date.getHours();\n            const minutes = date.getMinutes();\n            const formattedTime = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\n\n            let controls = '';\n\n            if (session.status == 'pending') {\n                pendingsCount++;\n                controls = `<div class=\"control\" data-session=${session.session_token}>\n                            <span>–û—á–µ—Ä–µ–¥—å ${pendingsCount}</span>\n                            <button type=\"button\" class=\"start\"></button>\n                        </div>`;\n\n            } else if (session.status == 'completed') {\n                controls = `<div class=\"control\" data-session=${session.session_token}>\n                            <span class=\"coin\">coin</span>\n                            <span class=\"time\">${formattedTime}</span>\n                        </div>`;\n\n            } else if (session.status == 'started') {\n                controls = `<div class=\"control\" data-session=${session.session_token}>\n                            <span>–ò–¥–µ—Ç –∏–≥—Ä–∞</span>\n                            <button type=\"button\" class=\"stop\"></button>\n                        </div>`;\n\n            } else if (session.status == 'stopped_by_admin' || session.status == 'stopped_by_admin') {\n                controls = `<div class=\"control\" data-session=${session.session_token}>\n                                <span class=\"coin\">coin</span>\n                                <span class=\"time\">${formattedTime}</span>\n                            </div>`;\n            }\n\n            const html = `\n                <li class=\"${session.status == 'started' ? 'active' : ''} \" data-token=${session.player_token}>\n                    <span>${index}</span>\n                    <span>${session.badge_id}</span>\n                    <span>${session.name}</span>\n                    ${controls}\n                </li>`;\n            this.container.insertAdjacentHTML('beforeend', html);\n        });\n        // this.setupControls();\n    }\n\n    /**\n     * –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –≤ –ø—É–ª (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ \n     * –∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –æ–∫–Ω—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞)\n     * @param {*} playerToken \n     * @returns \n     */\n\n    static async addToPool(playerToken) {\n        const token = _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getToken();\n\n        if (!token) {\n            console.error('[AUTH] –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');\n            window.location.href = '/auth.html';\n            return;\n        }\n\n        if (!playerToken) {\n            console.error('–¢–æ–∫–µ–Ω –∏–≥—Ä–æ–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ø—É–ª');\n            return null;\n        }\n\n        const body = {\n            player_token: playerToken\n        };\n\n        try {\n            const response = await fetch(`${PlayerPool.BASE_URL}/admin/games/${PlayerPool.gameToken}/pool`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${token}`,\n                    // 'X-Admin-API-Key': PlayerPool.adminKey,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(body)\n            });\n\n            const data = await response.json();\n\n            if (!data?.data?.success) {\n                console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—É–ª:', data.data.message);\n                return data.data; // –í–µ—Ä–Ω—ë–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ALREADY_IN_POOL_OR_ACTIVE)\n            }\n\n            console.log('–ò–≥—Ä–æ–∫ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—É–ª:', data.data);\n            alert(data.data.message)\n            return data.data; // –í–∫–ª—é—á–∞–µ—Ç session_token –∏ –ø—Ä–æ—á–µ–µ\n\n        } catch (error) {\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –ø—É–ª:', error);\n            return null;\n        }\n    }\n\n    /**\n     * —Å—Ç–∞—Ä—Ç —Å–µ—Å—Å–∏–∏ –∏–≥—Ä–æ–∫–∞. \n     * @param {*} sessionToken \n     * @returns \n     */\n    async startSession(sessionToken) {\n        if (!sessionToken) {\n            console.error('–¢–æ–∫–µ–Ω —Å–µ—Å—Å–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞');\n            return null;\n        }\n\n        const stopButtonExists = this.container.querySelector('.stop');\n        if (stopButtonExists) {\n            const confirmStart = confirm('–£–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? –¢–µ–∫—É—â–∞—è –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—á–∫–æ–≤.');\n            if (!confirmStart) {\n                console.log('–ó–∞–ø—É—Å–∫ –æ—Ç–º–µ–Ω—ë–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º');\n                return;\n            }\n        }\n\n        const token = _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getToken();\n\n        if (!token) {\n            console.error('[AUTH] –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');\n            window.location.href = '/auth.html';\n            return;\n        }\n    \n        try {\n            const response = await fetch(`${PlayerPool.BASE_URL}/admin/games/${PlayerPool.gameToken}/start`, {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${token}`,\n                    // 'X-Admin-API-Key': PlayerPool.adminKey,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ session_token: sessionToken })\n            });\n    \n            const data = await response.json();\n    \n            if (data?.data?.success) {\n                console.log('–°–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞:', data.data.message);\n                alert(data.data.message);\n                await this.loadPool(); // –û–±–Ω–æ–≤–∏–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞\n                return data.data;\n            } else {\n                console.warn('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Å—Å–∏–∏:', data.data.message);\n                alert(data.data.message);\n                return data.data;\n            }\n        } catch (error) {\n            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Å—Å–∏–∏:', error);\n            return null;\n        }\n    }\n\n    /**\n     * –û—Å—Ç–∞–≤–æ–≤–∫–∞ —Å–µ–∫—Ü–∏–∏ –ø–æ –∫–ª–∏–∫—É\n     */\n    async stopActiveSession() {\n        try {\n\n            const token = _auth_adminAuth_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getToken();\n\n        if (!token) {\n            console.error('[AUTH] –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');\n            window.location.href = '/auth.html';\n            return;\n        }\n\n          const response = await fetch(`${PlayerPool.BASE_URL}/admin/games/${PlayerPool.gameToken}/stop`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${token}`,\n            //   'X-Admin-API-Key': PlayerPool.adminKey,\n              'Content-Type': 'application/json'\n            }\n          });\n      \n          const data = await response.json();\n      \n          if (response.ok && data?.data?.success) {\n            alert('–°–µ—Å—Å–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º');\n            console.log(data.data.message);\n            await this.loadPool();\n          } else {\n            console.warn(data.data?.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–µ—Å—Å–∏–∏');\n          }\n        } catch (error) {\n          console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏:', error);\n        }\n      }\n      \n    \n\n    // setupControls() {\n    //     this.container.querySelectorAll('.start').forEach(btn => {\n    //         btn.addEventListener('click', () => {\n    //             const sessionToken = btn.dataset.session;\n    //             this.startSession(sessionToken);\n    //         });\n    //     });\n    // }\n\n    // async startSession(sessionToken) {\n    //     const response = await fetch(`/admin/games/${this.gameToken}/start`, {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //         },\n    //         body: JSON.stringify({ session_token: sessionToken })\n    //     });\n    //     if (response.ok) {\n    //         alert('–°–µ—Å—Å–∏—è –∑–∞–ø—É—â–µ–Ω–∞');\n    //         this.loadPool(); // –æ–±–Ω–æ–≤–∏–º —Å–ø–∏—Å–æ–∫\n    //     } else {\n    //         alert('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Å—Å–∏–∏');\n    //     }\n    // }\n\n\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (PlayerPool);\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/admin/sessionPool.js?")},"./src/assets/js/auth/adminAuth.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\nclass AdminAuth {\n    constructor() {\n        this.apiUrl = 'https://gameserver2.kemo.ru/api/admin/login-token';\n        this.tokenKey = 'admin_token';\n        this.expireKey = 'admin_token_expires';\n        this.form = document.getElementById('auth_form');\n        this.loginInput = document.getElementById('auth_login');\n        this.passInput = document.getElementById('auth_pass');\n\n        if (!this.form) {\n            console.info('[AUTH] –ù–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –§–æ—Ä–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.');\n            // return; // –ø—Ä–µ—Ä—ã–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é\n        }else{\n            this.init();\n        }\n\n    }\n\n    init() {\n        this.form.addEventListener('submit', (e) => {\n            // console.log(this.form);\n            e.preventDefault();\n            this.login();\n        });\n    }\n\n    async login() {\n        const password = this.passInput.value.trim();\n\n        if (!password) {\n            alert('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');\n            return;\n        }\n\n        try {\n            const response = await fetch(this.apiUrl, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ password })\n            });\n\n            const result = await response.json();\n\n            if (result.data?.success) {\n                const token = result.data.token;\n                const expires = Date.now() + result.data.expires_in * 1000;\n\n                localStorage.setItem(this.tokenKey, token);\n                localStorage.setItem(this.expireKey, expires);\n\n                console.log('[AUTH] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω');\n                window.location.href = '/admin.html'; // –∏–ª–∏ –Ω—É–∂–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞\n            } else {\n                alert(result.data.message || '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏');\n            }\n\n        } catch (error) {\n            console.error('[AUTH] –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);\n            alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');\n        }\n    }\n\n    static logout() {\n        localStorage.removeItem('admin_token');\n        localStorage.removeItem('admin_token_expires');\n        window.location.href = '/auth.html';\n    }\n\n    static isAuthenticated() {\n        const token = localStorage.getItem('admin_token');\n        const expires = localStorage.getItem('admin_token_expires');\n        return token && expires && Date.now() < Number(expires);\n    }\n\n    static getToken() {\n        return localStorage.getItem('admin_token');\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AdminAuth);\n\n\n//# sourceURL=webpack://vitaliy.wp.dev/./src/assets/js/auth/adminAuth.js?")}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];return void 0!==e||(e=__webpack_module_cache__[n]={exports:{}},__webpack_modules__[n](e,e.exports,__webpack_require__)),e.exports}__webpack_require__.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/assets/js/admin.js")}();